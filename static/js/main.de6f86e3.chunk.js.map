{"version":3,"sources":["pages/main.jsx","utils/bulb.js","App.jsx","index.js"],"names":["Main","_useState","useState","_useState2","Object","slicedToArray","connected","setConnected","react_default","a","createElement","Fragment","Button_default","variant","color","onClick","console","log","navigator","bluetooth","requestDevice","acceptAllDevices","optionalServices","then","device","name","addEventListener","gatt","connect","server","getPrimaryService","service","getCharacteristic","characteristic","catch","error","bulb","App","className","role","aria-label","main","ReactDOM","render","src_App","document","getElementById"],"mappings":"iLAyBeA,MApBf,WAAgB,IAAAC,EACoBC,oBAAS,GAD7BC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACPK,EADOH,EAAA,GACII,EADJJ,EAAA,GAOd,OACEK,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACE,EAAAH,EAAD,CACEI,QAAQ,YACRC,MAAM,UACNC,QATU,YCUX,SAAiBR,GACtBS,QAAQC,IAAI,kCACZC,UAAUC,UACPC,cAAc,CACbC,kBAAkB,EAClBC,iBAAkB,CAAC,SAEpBC,KAAK,SAAAC,GAIJ,OAHAR,QAAQC,IAAI,WAAaO,EAAOC,MAChCT,QAAQC,IAAI,gCACZO,EAAOE,iBAAiB,yBAA0BnB,GAAa,IACxDiB,EAAOG,KAAKC,YAEpBL,KAAK,SAAAM,GAEJ,OADAb,QAAQC,IAAI,6CACLY,EAAOC,kBAAkB,SAOjCP,KAAK,SAAAQ,GAEJ,OADAf,QAAQC,IAAI,oDACLc,EAAQC,kBAAkB,SAElCT,KAAK,SAAAU,GACJjB,QAAQC,IAAI,cACQgB,EACpB1B,GAAa,KAEd2B,MAAM,SAAAC,GACLnB,QAAQC,IAAI,SAAWkB,GACvB5B,GAAa,KD1Cf6B,CAAa7B,KAURD,EAAY,qEAAgB,8EEEtB+B,MAjBf,WACE,OACE7B,EAAAC,EAAAC,cAAA,OAAK4B,UAAU,OACb9B,EAAAC,EAAAC,cAAA,iEACW,IACTF,EAAAC,EAAAC,cAAA,QAAM6B,KAAK,MAAMC,aAAW,oDAA5B,iBAIFhC,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAC+B,EAAD,OAEFjC,EAAAC,EAAAC,cAAA,uICXNgC,IAASC,OAAOnC,EAAAC,EAAAC,cAACkC,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.de6f86e3.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nimport * as bulb from '../utils/bulb';\nimport Button from '@material-ui/core/Button';\n\nfunction Main() {\n  const [connected, setConnected] = useState(false);\n\n  const connect = () => {\n    bulb.connect(setConnected);\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={connect}\n      >\n        {connected ? '–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è' : '–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è'}\n      </Button>\n    </>\n  );\n}\n\nexport default Main;\n","let ledCharacteristic = null;\nlet poweredOn = false;\n\nfunction onConnected() {\n  document.querySelector('.connect-button').classList.add('hidden');\n  document.querySelector('.color-buttons').classList.remove('hidden');\n  document.querySelector('.mic-button').classList.remove('hidden');\n  document.querySelector('.power-button').classList.remove('hidden');\n  poweredOn = true;\n}\n\nfunction onDisconnected() {\n  document.querySelector('.connect-button').classList.remove('hidden');\n  document.querySelector('.color-buttons').classList.add('hidden');\n  document.querySelector('.mic-button').classList.add('hidden');\n  document.querySelector('.power-button').classList.add('hidden');\n}\n\nexport function connect(setConnected) {\n  console.log('Requesting Bluetooth Device...');\n  navigator.bluetooth\n    .requestDevice({\n      acceptAllDevices: true,\n      optionalServices: [0xff0d],\n    })\n    .then(device => {\n      console.log('> Found ' + device.name);\n      console.log('Connecting to GATT Server...');\n      device.addEventListener('gattserverdisconnected', setConnected(false));\n      return device.gatt.connect();\n    })\n    .then(server => {\n      console.log('Getting Service 0xff0d - Light control...');\n      return server.getPrimaryService(0xff0d);\n    })\n    // –ü—Ä–æ—Å—Ç–æ —Ü–≤–µ—Ç\n    // .then(service => {\n    //     console.log('Getting Characteristic 0xfffc - Light control...');\n    //     return service.getCharacteristic(0xfffc);\n    // })\n    .then(service => {\n      console.log('Getting Characteristic 0xfffc - Light control...');\n      return service.getCharacteristic(0xfffb);\n    })\n    .then(characteristic => {\n      console.log('All ready!');\n      ledCharacteristic = characteristic;\n      setConnected(true);\n    })\n    .catch(error => {\n      console.log('Argh! ' + error);\n      setConnected(false);\n    });\n}\n\nfunction powerOn() {\n  let data = new Uint8Array([0xcc, 0x23, 0x33]);\n  return ledCharacteristic\n    .writeValue(data)\n    .catch(err => console.log('Error when powering on! ', err))\n    .then(() => {\n      poweredOn = true;\n      toggleButtons();\n    });\n}\n\nfunction powerOff() {\n  let data = new Uint8Array([0xcc, 0x24, 0x33]);\n  return ledCharacteristic\n    .writeValue(data)\n    .catch(err => console.log('Error when switching off! ', err))\n    .then(() => {\n      poweredOn = false;\n      toggleButtons();\n    });\n}\n\nfunction togglePower() {\n  if (poweredOn) {\n    powerOff();\n  } else {\n    powerOn();\n  }\n}\n\nfunction toggleButtons() {\n  Array.from(document.querySelectorAll('.color-buttons button')).forEach(\n    function(colorButton) {\n      colorButton.disabled = !poweredOn;\n    },\n  );\n  document.querySelector('.mic-button button').disabled = !poweredOn;\n}\n\n// 0xfffc\nfunction setColor(red, green, blue) {\n  // 1. –Ø—Ä–∫–æ—Å—Ç—å (–±–µ–ª–æ—Ç–∞), —Ö–∑ –∫–∞–∫ —Å–∫–∞–∑–∞—Ç—å\n  // 2. –ö—Ä–∞—Å–Ω—ã–π\n  // 3. –ó–µ–ª–µ–Ω—ã–π\n  // 4. –°–∏–Ω–∏–π\n  // 5. ??\n  // 6. –°–∫–æ—Ä–æ—Å—Ç—å\n  // 7. –°–∫–æ—Ä–æ—Å—Ç—å\n  let data = new Uint8Array([0x56, red, green, blue, 0x00, 0xf0, 0xaa]);\n  // return ledCharacteristic.writeValue(data)\n  //     .catch(err => console.log('Error when writing value! ', err));\n  return ledCharacteristic\n    .writeValue(new Uint8Array([0x11, 0, 255, 0]))\n    .catch(err => console.log('Error when writing value! ', err));\n}\n\n// 0xfffb\nfunction setRainbow(red, green, blue) {\n  // 1. 00 ‚Üí ff, –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å\n  // 2. –ö—Ä–∞—Å–Ω—ã–π\n  // 3. –ó–µ–ª–µ–Ω—ã–π\n  // 4. –°–∏–Ω–∏–π\n  // 5. 03 ‚Üí ?? –ö–æ–≥–¥–∞ –Ω–µ 03, –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è\n  // 6. 00 ‚Üí ff, –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å\n  // 7. 23 ‚Üí 14, —É—Å–∫–æ—Ä–∏–ª–æ—Å—å. ‚Üí 41, –∑–∞–º–µ–¥–ª–∏–ª–æ—Å—å\n  // 8. 00 ‚Üí ff, –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å\n  let data = new Uint8Array([0x00, red, green, blue, 0x03, 0xff, 0x41, 0xff]);\n  return ledCharacteristic\n    .writeValue(data)\n    .catch(err => console.log('Error when writing value! ', err));\n}\n\nfunction rainbow() {\n  return setRainbow(100, 100, 0).then(() =>\n    console.log('Color set to Rainbow'),\n  );\n}\n\nfunction red() {\n  return setColor(255, 0, 0).then(() => console.log('Color set to Red'));\n}\n\nfunction green() {\n  return setColor(0, 255, 0).then(() => console.log('Color set to Green'));\n}\n\nfunction blue() {\n  return setColor(0, 0, 255).then(() => console.log('Color set to Blue'));\n}\n","import React from 'react';\nimport './App.css';\nimport MainPage from './pages/main';\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <header>\n        –õ–∞–º–ø–æ—á–∫–∞{' '}\n        <span role=\"img\" aria-label=\"–ª–∞–º–ø–æ—á–∫–∞\">\n          üí°\n        </span>\n      </header>\n      <main>\n        <MainPage />\n      </main>\n      <footer>–ê–ª—å–±–µ—Ä—Ç –ê–±–¥—É–ª—å–º–∞–Ω–æ–≤, 2019</footer>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}